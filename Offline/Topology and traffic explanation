It is using 32 hosts, 3 tier fat tree topology, with 8 edge switches, 8 aggregate switches and 4 core switches. We assume uniform traffic distribution and draw two scenarios, 1. east-west bound where there are 16 distinct pairs between left two and right two pods. 2. north-south bound where all 32 hosts are communicating with the gateway switch which is connected to the core switches. 

In terms of link and middlebox capacity, quantatively we have each link with capacity of 1 and each switch has a middlebox attached to it with a processing capacity to handle flow size 1. We set each flow demand to 0.4 and the same amount of request for middlebox processing. So from the topology it is not too hard to infer that 1. for east-west bound traffic the link utilization is 0.8 for the links between edge and aggregate switches, and between the aggregate and the core, and the middlebox utilization is 0.32 if the flow is infinitely divisible for both routing and middlebox handling. For north-south bound traffic the link utilization is the same (if we assume it is not bottlenecked by the links between the core and gateway switches), and the middlebox utilizaiton is 0.64 since the flows required is doubled. 